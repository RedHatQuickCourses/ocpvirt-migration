<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>The Migration Plan :: Migrate VMs from VMware vSphere to Red Hat OpenShift Virtualization</title>
    <link rel="prev" href="section2.html">
    <link rel="next" href="section4.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Migrate VMs from VMware vSphere to Red Hat OpenShift Virtualization</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/ocpvirt-migration/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ocpvirt-migration" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Migrate VMs from VMware vSphere to Red Hat OpenShift Virtualization</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter1/index.html">Introduction to Operator Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/section1.html">Install OpenShift Virtualization Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/section2.html">Install Migration Toolkit Virtualization Operator</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Migrate VMs from VMware vSphere to OpenShift Virtualization</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section1.html">The VMware environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section2.html">Add a VMware vSphere source provider and connect to VMware provider</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="section3.html">The Migration Plan</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section4.html">Review and configure migrated Virtual Machines</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Migrate VMs from VMware vSphere to Red Hat OpenShift Virtualization</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Migrate VMs from VMware vSphere to Red Hat OpenShift Virtualization</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Migrate VMs from VMware vSphere to Red Hat OpenShift Virtualization</a></li>
    <li><a href="index.html">Migrate VMs from VMware vSphere to OpenShift Virtualization</a></li>
    <li><a href="section3.html">The Migration Plan</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">The Migration Plan</h1>
<div class="sect1">
<h2 id="_create_storage_and_network_mapping"><a class="anchor" href="#_create_storage_and_network_mapping"></a>Create Storage and Network Mapping</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Storage and networking are managed differently in VMware vSphere and Red Hat OpenShift. Therefore it is necessary to create a (simple) mapping from the source datastores and networks in VMware vSphere to the equivalent in OpenShift. This mapping will then be used to translate the VMware vSphere network and storage definitions to OpenShift network and storage definitions.</p>
</div>
<div class="paragraph">
<p>These only need to be configured once and are then reused in subsequent VM Migration Plans.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate in the left menu to <strong>Migration</strong> &#8594; <strong>NetworkMaps for virtualization</strong> and press <strong>Create NetworkMap</strong></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/96_MTV_NetworkMaps.png" alt="96 MTV NetworkMaps">
</div>
</div>
</li>
<li>
<p>Fill in the following information in the appeared dialog box. Press <strong>Create</strong>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Name</strong>: <code>mapping-segment</code></p>
</li>
<li>
<p><strong>Source provider</strong>: <code>vmware</code></p>
</li>
<li>
<p><strong>Target provider</strong>: <code>host</code></p>
</li>
<li>
<p><strong>Source networks</strong>: <code>segment-migrating-to-ocpvirt</code></p>
</li>
<li>
<p><strong>Target network</strong>: <code>Pod network (default)</code></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/97_Add_VMWARE_Mapping_Network.png" alt="97 Add VMWARE Mapping Network">
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Ensure that the created mapping has the <strong>Status</strong> <code>Ready</code></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/98_List_VMWARE_Mapping_Network.png" alt="98 List VMWARE Mapping Network">
</div>
</div>
</li>
<li>
<p>Navigate in the left menu to <strong>Migration</strong> &#8594; <strong>StorageMaps for virtualization</strong> and press <strong>Create StorageMap</strong></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/99_MTV_StorageMaps.png" alt="99 MTV StorageMaps">
</div>
</div>
</li>
<li>
<p>Fill in the following information. Press <strong>Create</strong>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Name</strong>: <code>mapping-datastore</code></p>
</li>
<li>
<p><strong>Source provider</strong>: <code>vmware</code></p>
</li>
<li>
<p><strong>Target provider</strong>: <code>host</code></p>
</li>
<li>
<p><strong>Source storage</strong>: <code>WorkloadDatastore</code></p>
</li>
<li>
<p><strong>Target storage classs</strong>: <code>ocs-storagecluster-ceph-rbd (default)</code></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/100_Add_VMWARE_Mapping_Storage.png" alt="100 Add VMWARE Mapping Storage">
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Ensure that the created mapping has the <strong>Status</strong> <code>Ready</code></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/101_List_VMWARE_Mapping_Storage.png" alt="101 List VMWARE Mapping Storage">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_and_run_migration_plan"><a class="anchor" href="#_create_and_run_migration_plan"></a>Create and Run Migration Plan</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have the virtualization provider and the two mappings (network &amp; storage) you can create a Migration Plan - this plan selects which VMs to migrate from VMware vSphere to Red Hat OpenShift Virtualization and how to execute the migration (cold/warm, network mapping, storage mapping, pre-/post-hooks, etc.).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate in the left menu to <strong>Migration</strong> &#8594; <strong>Plans for virtualization</strong> and press <strong>Create plan</strong></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/102_Create_VMWARE_Plan.png" alt="102 Create VMWARE Plan">
</div>
</div>
</li>
<li>
<p>On the wizard fill the following information on the <strong>General settings</strong> step. Press <strong>Next</strong> when done.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Plan name</strong>: <code>move-webapp-vmware</code></p>
</li>
<li>
<p><strong>Source provider</strong>: <code>vmware</code></p>
</li>
<li>
<p><strong>Target provider</strong>: <code>host</code></p>
</li>
<li>
<p><strong>Target namespace</strong>: <code>vmexamples</code></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/52_General_VMWARE_Plan.png" alt="52 General VMWARE Plan">
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>On the next step, select <code>All datacenters</code>  and press <strong>Next</strong></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/53_VM_Filter_VMWARE_Plan.png" alt="53 VM Filter VMWARE Plan">
</div>
</div>
</li>
<li>
<p>On the next step select  all the VMs. Press <strong>Next</strong>:</p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/54_VM_Select_VMWARE_Plan.png" alt="54 VM Select VMWARE Plan">
</div>
</div>
</li>
<li>
<p>On the <strong>Network mapping</strong> step select <code>mapping-segment</code> and press <strong>Next</strong></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/55_Network_VMWARE_Plan.png" alt="55 Network VMWARE Plan">
</div>
</div>
</li>
<li>
<p>On the <strong>Storage mapping</strong> step select <code>mapping-datastore</code> and press <strong>Next</strong></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/56_Storage_VMWARE_Plan.png" alt="56 Storage VMWARE Plan">
</div>
</div>
</li>
<li>
<p>Press <strong>Next</strong> on the steps <strong>Type</strong> and <strong>Hooks</strong></p>
</li>
<li>
<p>Review the configuration specified and press <strong>Finish</strong></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/57_Finish_VMWARE_Plan.png" alt="57 Finish VMWARE Plan">
</div>
</div>
</li>
<li>
<p>Ensure that the status of the plan is <strong>Ready</strong></p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/58_Ready_VMWARE_Plan.png" alt="58 Ready VMWARE Plan">
</div>
</div>
</li>
<li>
<p>Press <strong>Start</strong> to begin the migration of the three VMs</p>
</li>
<li>
<p>After around 40 minutes the migration is completed</p>
<div class="imageblock">
<div class="content">
<img src="_images/MTV/59_Completed_VMWARE_Plan.png" alt="59 Completed VMWARE Plan">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Having many participants performing the same task in parallel can cause this task to perform slower than in a real environment. Please be patient.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="section2.html">Add a VMware vSphere source provider and connect to VMware provider</a></span>
  <span class="next"><a href="section4.html">Review and configure migrated Virtual Machines</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
